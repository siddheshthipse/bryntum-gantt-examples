# Tutorial - Vue 3

Follow the steps in this tutorial to get this app up and running:

<div class="external-example" data-file="Scheduler/guides/tutorial/result.js" data-source="Scheduler/guides/tutorial/result-vue3.vue"></div>

## 1. Create a Vue 3 app

In this first step we are going to create a basic Vue 3 app using Vite (as per
[this guide](https://vuejs.org/guide/quick-start.html#creating-a-vue-application) from vuejs.org).

1. In an empty folder, run:
```shell
npm init vue@latest
```

2. Choose `'y'` for the first question asked, input `vue-tutorial` as the apps name, and then pick `No` for all
   following questions.

3. Follow the instructions outputted by the scaffolding process:

```shell
cd vue-tutorial
npm install
npm run dev
```

You should now have an "empty" Vue 3 app up and running, time to include the Scheduler.

## 2. Include the Scheduler

Now we are going to add a minimal Scheduler to the app.

1. Install the Scheduler packages (if you have not already, first set up the repo as per
   [the quick start guide](#Scheduler/guides/quick-start/vue-3.md)):

```shell
npm install @bryntum/scheduler @bryntum/scheduler-vue-3
```
<div class="note">
Note that if you are using a trial, replace <code>@bryntum/scheduler</code> with 
<code>@bryntum/scheduler@npm:@bryntum/scheduler-trial</code>.
</div>

2. Now replace the contents of `App.vue` with:

```html
<script setup>
import '@bryntum/scheduler'
import { BryntumScheduler } from '@bryntum/scheduler-vue-3'
import '@bryntum/scheduler/scheduler.material.css'
</script>

<template>
    <bryntum-scheduler
        :width="800"
        :height="600"
        start-date="2023-04-16"
        end-date="2023-05-15"
    ></bryntum-scheduler>
</template>

<style>

</style>
```
The page should now show something similar to this:

<div class="external-example" data-file="Scheduler/guides/tutorial/minimal.js" data-source="Scheduler/guides/tutorial/minimal-vue3.vue"></div>

<div class="note">Note that none of the CSS or Vue files (except for <code>App.vue</code>) generated by the scaffolding
process are needed for this tutorial, so you can safely delete them (and any imports of them).</div>

## 3. Loading data

The scheduler above is very empty, lets populate it with some data.

Scheduler accepts inline data by binding to `events`, `resources` etc., or it can use a `CrudManager` to load remote
data. Depending on your setup you will want to pick one or the other.

If you for example have multiple widgets on your page displaying the same data, you might already have it available on
the client - binding it as inline data can then be cheaper than remotely loading it also for Scheduler. But for most
cases loading it remotely will be the best fit.

To load data remotely, configure `crudManager` with an url to load from. Modify the previous snippet, adding the
following:

```html
<script setup>
   // Code from the previous steps omitted for brevity

   // CrudManager handles data loading (and syncing, but not in this example)
   const crudManagerConfig = {
       loadUrl  : 'data/data.json',
       autoLoad : true
    };
</script>
<template>
   <!-- Code from the previous steps omitted for brevity -->
    <bryntum-scheduler
        :crud-manager="crudManagerConfig"
    ></bryntum-scheduler>
</template>
```

The response is expected in a specific format, see
[this guide](#Scheduler/guides/data/crud_manager.md#load-response-structure). The data used for this tutorial is
available here: [data.json](data/Scheduler/examples/guides/tutorial/data.json). An excerpt from that file:

```json
{
  "success" : true,
  "events" : {
    "rows" : [
      {
        "id"         : 1,
        "resourceId" : 1,
        "startDate"  : "2023-04-17",
        "duration"   : 7,
        "name"       : "Project Kickoff"
      },
      {
        "..." : "..."
      }
    ]
  }
}
```

Note that although not shown above, the response also contains a `resources` section. This is used as the row source
for the Scheduler. The `events` section is used as the event source. Also note that while events are defined with a
`startDate` and a `duration`, you can also instead supply a `startDate` and an `endDate`.

To match the url used in the snippet above, please copy the `data.json` file to `public/data/data.json`. With the
correct load url now in place, you should be seeing the following:

<div class="external-example" data-file="Scheduler/guides/tutorial/load.js" data-source="Scheduler/guides/tutorial/load-vue3.vue"></div>

## 4. Saving changes

As for loading data, you have multiple options for saving changes. You can use the `CrudManager` to sync changes
automatically to the backend (by configuring it with a `syncUrl` and `autoSync`), which requires your backend to follow
the CrudManager protocol. Or you can listen for changes and handle them your preferred way manually, trading ease of use
on the client for flexibility on the server.

In this step we will use the latter approach. We will listen for changes, but since we have no backend in place we will
just log the changes to the console. Modify the previous snippet, adding the following:

```javascript
<script setup>
    // Code from the previous steps omitted for brevity

    // CrudManager handles data loading (and syncing, but not in this example)
    const crudManagerConfig = {
        loadUrl   : 'data/data.json',
        autoLoad  : true,
        listeners : {
            // Bryntum API listener for the `hasChanges` event, triggered when any store
            // handled by the crud manager has changes
            hasChanges() {
               console.log(this.changes);

               // In a real app you would send the changes to the server here.
               // Then you would call `this.acceptChanges()` to
               // clear local changes
            }
        }
    };
</script>
<template>
    <!-- Code from the previous steps omitted for brevity -->
    <bryntum-scheduler
        :crud-manager="crudManagerConfig"
    ></bryntum-scheduler>
</template>
```

Try it out here (be sure to open the console to see the output):

<div class="external-example" data-file="Scheduler/guides/tutorial/save.js" data-source="Scheduler/guides/tutorial/save-vue3.vue"></div>

## 5. Adding columns

A Scheduler by default consists of a left-hand side grid part with fixed width and a schedule part occupying the rest of
the width. The grid part shows information about the resources. You can add an arbitrary number of columns to it (see
the [Scheduler columns guide](#Scheduler/guides/basics/columns.md) for more info). In this step we add two columns:

```html
<script setup>
    // Code from the previous steps omitted for brevity

    // Columns in the grid part
    const columnsConfig = [
        {
            field : 'name',
            text  : 'Name'
        },
        {
            field : 'role',
            text  : 'Role'
        }
   ];
</script>
<template>
   <!-- Code from the previous steps omitted for brevity -->
   <bryntum-scheduler
      :colums="columnsConfig"
      ></bryntum-scheduler>
</template>
```

The app should now look something like this:

<div class="external-example" data-file="Scheduler/guides/tutorial/columns.js" data-source="Scheduler/guides/tutorial/columns-vue3.vue"></div>

## 6. Enabling features

Scheduler ships with a set of features that can be enabled/disabled and configured to affect the functionality of the
component (see the [Scheduler features](#Scheduler/guides/basics/features.md) guide). We are going to enable
the `Stripe` feature (which gives every even row a gray background).

Alter your Scheduler config, add:

```html
<template>
    <!-- Code from the previous steps omitted for brevity -->
    <bryntum-scheduler
        :stripe-feature="true"
        ></bryntum-scheduler>
</template>
```

That change yields the following app:

<div class="external-example" data-file="Scheduler/guides/tutorial/features.js" data-source="Scheduler/guides/tutorial/features-vue3.vue"></div>

## 7. Reacting to events

Scheduler, its features and data stores fire a number of events that you can listen to, for example Scheduler fires
`eventClick` when clicking an event, the `resourceStore` fires `add` when a new resources is added, etc. See the API
docs for each class for all events (Scheduler's events are for example [listed here](#Scheduler/view/Scheduler#events)).

To catch an event, you can add method handlers to the component using standard Vue 3 syntax (`@event-click` etc.), or
specify declarative `listeners` in the Bryntum config object, or add them programmatically using the `on` method. In
this step we will add a handler for `@event-click`, and a programmatic listener for the `beforeEventEdit` event (see the
Saving changes section above for an example of using a `listeners` object).

First a Vue style handler for the `eventClick` event:

```javascript
<script setup>
    // Code from the previous steps omitted for brevity

    // Handler for @event-click
    function onEventClick({ eventRecord }) {
        Toast.show(`Clicked ${eventRecord.name}`);
    }
</script>

<template>
    <!-- Code from the previous steps omitted for brevity -->
    <bryntum-scheduler
        @event-click="onEventClick"
    ></bryntum-scheduler>
</template>
```

And now a programmatic listener for the `beforeEventEdit` event:

```javascript
<script setup>
    import { BryntumScheduler } from '@bryntum/scheduler-vue-3'
    import '@bryntum/scheduler/scheduler.material.css'
    // Import Toast to show a message in our event handlers
    import { Toast } from '@bryntum/scheduler'
    // Import onMounted & ref to be able to access the Scheduler instance
    // to set up a programmatic listener
    import { onMounted, ref } from 'vue'

    // Code from the previous steps omitted for brevity

    // Scheduler ref, to be able to reach it in the hook below
    const scheduler = ref(null);

    onMounted(() => {
        // Programmatic listener
        scheduler.value.instance.value.on({
            beforeEventEdit({ eventRecord })  {
                Toast.show(`Editing ${eventRecord.name}`);
            }
        })
    });
</script>

<template>
    <!-- Code from the previous steps omitted for brevity -->
    <bryntum-scheduler
        ref="scheduler"
    ></bryntum-scheduler>
</template>
```

<div class="note">You can use <code>@</code> handlers for all events triggered on the Scheduler, but for more advance
use cases that require reaching into deeper parts of the API, you might have to use declarative / programmatic
listeners.</div>

<div class="external-example" data-file="Scheduler/guides/tutorial/events.js" data-source="Scheduler/guides/tutorial/events-vue3.vue"></div>

## 8. Customizing the time axis

The cells in the schedule part are called "ticks". The size of these and the header above them can be customized using
a view preset. Scheduler ships with a number of presets, but you can also define your own or extend existing ones. See
the API docs for [PresetManager](#Scheduler/preset/PresetManager) for the full listing.

For this tutorial, we are going to extend the existing `weekAndDayLetter` preset to modify the top header to show the
week number instead of the first date of the week. Add the following to your app:

```html
<script setup>
    // Code from the previous steps omitted for brevity

    // The view preset controls the time axis and its header
    const viewPresetConfig = {
       base : 'weekAndDayLetter',

       // Customize the header
       headers : [
          // Week 16 ... on the top level
          {
            unit       : 'week',
            dateFormat : 'Wp'
          },
          // M, T, W ... on the bottom level
          {
            unit       : 'day',
            dateFormat : 'd1'
          }
       ]
    };
</script>
<template>
    <!-- Code from the previous steps omitted for brevity -->
    <bryntum-scheduler
        :view-preset="viewPresetConfig"
   ></bryntum-scheduler>
</template>
```

The header should now have changed in your app:

<div class="external-example" data-file="Scheduler/guides/tutorial/viewpreset.js" data-source="Scheduler/guides/tutorial/viewpreset-vue3.vue"></div>

## 7. Adding some style and color

For the last step of this tutorial we are going to apply some color and styling to the Scheduler. For more info on the
topic, see the [Styling](#Scheduler/guides/customization/styling.md) guide.

An events color is derived from three sources: the scheduler, the resource and the event itself. As you might have
noticed already, one of the events have a different color than the others. This is determined by the `eventColor` field
in its data. We are going to set an `eventColor` on the Scheduler, to change all others.

An events look is determined in a similar way, by using the `eventStyle` field. In addition to changing the color, we
are also going the change to another `eventStyle` for all events:

```html
<template>
   <!-- Code from the previous steps omitted for brevity -->
   <bryntum-scheduler
        event-style="border"
        event-color="indigo"
   ></bryntum-scheduler>
</template>
```

The green events are now indigo instead, and the style has changed:

<div class="external-example" data-file="Scheduler/guides/tutorial/styling1.js" data-source="Scheduler/guides/tutorial/styling1-vue3.vue"></div>

You can of course also use CSS to style the Scheduler and its events. For example, to add more border-radius for a
rounded look:

```html
<style>
   .b-sch-event {
       border-radius : 20px;
   }
</style>
```

<div class="note">
Note that there is no <code>scoped</code> attribute on the style tag. Adding it would make Vite rewrite the rule, and it
would no longer apply correctly.
</div>

Much rounder now:

<div class="external-example" data-file="Scheduler/guides/tutorial/result.js" data-source="Scheduler/guides/tutorial/result-vue3.vue"></div>

That's it, you finished the tutorial 👍 Happy coding!


<p class="last-modified">Last modified on 2024-05-21 9:04:59</p>